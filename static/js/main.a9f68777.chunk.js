(this["webpackJsonpremote-stream-camera"]=this["webpackJsonpremote-stream-camera"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},23:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=23},26:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),o=c(6),i=c.n(o),s=(c(14),c(2)),a=(c(15),c(28)),d=c(4),u=c.n(d),j=c(0);var l=function(){var e=Object(n.useState)(a.a),t=Object(s.a)(e,1)[0],c=u.a.resolve(window.location.href,u.a.format({query:{id:t,host:"true"}})),r=u.a.resolve(window.location.href,u.a.format({query:{id:t}}));return Object(j.jsx)("div",{children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:"please use these urls for each stream:"})})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"For"}),Object(j.jsx)("td",{children:"url"})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Stream host"}),Object(j.jsx)("td",{children:Object(j.jsx)("a",{href:c,children:c})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Stream guest"}),Object(j.jsx)("td",{children:Object(j.jsx)("a",{href:r,children:r})})]})]})]})})},b=c(5),f=c.n(b),O=c(3),h=c.n(O),v=c(8),x=c.n(v),m=function(){var e=new h.a(window.location.href,!0).query,t=Object(n.useState)(),c=Object(s.a)(t,2),r=c[0],o=c[1],i=Object(n.useState)(),a=Object(s.a)(i,2),d=a[0],u=a[1],l=Object(n.useState)(!1),b=Object(s.a)(l,2),O=b[0],v=b[1],m=Object(n.useState)(),w=Object(s.a)(m,2),y=w[0],p=w[1],g=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(!d||d.disconnected||d.destroyed){if(!d||d.destroyed){d&&d.destroy();var t=new f.a(e.id);return t.on("open",(function(e){v(!0),console.log("client ready with ID: ".concat(e))})),t.on("error",(function(){return v(!1)})),t.on("disconnected",(function(){return v(!1)})),t.on("call",(function(e){console.log("recieved call from ".concat(e.peer)),y&&y.close(),e.on("stream",(function(e){o(e)})),e.answer(),p(e)})),u(t),function(){d&&(d.destroy(),u(void 0)),v(!1)}}d.reconnect()}}),[O]),Object(n.useEffect)((function(){r&&(g.current.srcObject=r)}),[r]),Object(j.jsx)("div",{className:x.a.container,children:Object(j.jsx)("video",{className:x.a.stream,ref:g,autoPlay:!0})})};function w(e){console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)}var y=function(){var e=new h.a(window.location.href,!0).query,t=Object(n.useState)([]),c=Object(s.a)(t,2),r=c[0],o=c[1],i=Object(n.useState)(),a=Object(s.a)(i,2),d=a[0],u=a[1],l=Object(n.useState)(),b=Object(s.a)(l,2),O=b[0],v=b[1],x=Object(n.useState)(!1),m=Object(s.a)(x,2),y=m[0],p=m[1],g=Object(n.useRef)(null),S=Object(n.useRef)(null),E=S.current&&S.current.value;return Object(n.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){o(e)})).catch(w)})),Object(n.useEffect)((function(){if(!O||O.disconnected||O.destroyed){if(!O||O.destroyed){O&&O.destroy();var e=new f.a;return e.on("open",(function(e){p(!0),console.log("client ready with ID: ".concat(e))})),e.on("error",(function(){return p(!1)})),e.on("disconnected",(function(){return p(!1)})),v(e),function(){O&&(O.destroy(),v(void 0)),p(!1)}}O.reconnect()}}),[y]),Object(n.useEffect)((function(){if(E){var e={audio:!1,video:{deviceId:E?{exact:E}:void 0}};navigator.mediaDevices.getUserMedia(e).then((function(e){u(e)})).catch(w)}}),[E]),Object(n.useEffect)((function(){y&&d&&(g.current.srcObject=d,console.log("calling peerId ".concat(e.id)),O.call(e.id,d))}),[e.id,E,d,y]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{id:"container",children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Note:"})," without permission, the browser will restrict the available devices to at most one per type."]}),Object(j.jsxs)("div",{className:"select",children:[Object(j.jsx)("label",{htmlFor:S.current,children:"Video source: "}),Object(j.jsx)("select",{ref:S,children:r&&r.filter((function(e){return"videoinput"===e.kind})).map((function(e,t){return Object(j.jsx)("option",{value:e.deviceId,children:e.label||"camera ".concat(t)},e.deviceId)}))})]})]}),Object(j.jsx)("video",{ref:g,autoPlay:!0})]})},p=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,29)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),o(e),i(e)}))},g=new h.a(window.location.href,!0).query;g.id?"true"===g.host?i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root")):i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")):i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(l,{})}),document.getElementById("root")),p()},8:function(e,t,c){e.exports={stream:"HostApp_stream__3j4hp"}}},[[26,1,2]]]);
//# sourceMappingURL=main.a9f68777.chunk.js.map